# Теоретические знания по теме лабораторной работы

## 1. Проектирование баз данных

### 1.1 Этапы проектирования БД

1. **Анализ требований** - определение целей и задач системы
2. **Концептуальное проектирование** - создание инфологической модели
3. **Логическое проектирование** - создание даталогической модели
4. **Физическое проектирование** - создание физической модели

### 1.2 Инфологическая модель

Инфологическая модель - это описание предметной области в терминах информационных объектов и их взаимосвязей, независимо от способа их физического хранения.

**Основные элементы:**
- Сущности (объекты предметной области)
- Атрибуты (свойства сущностей)
- Связи между сущностями
- Ограничения целостности

## 2. Типы связей в реляционных БД

### 2.1 Связь "один к одному" (1:1)
- Каждому экземпляру сущности A соответствует не более одного экземпляра сущности B
- Каждому экземпляру сущности B соответствует не более одного экземпляра сущности A
- **Пример:** Паспорт ↔ Человек

### 2.2 Связь "один ко многим" (1:M)
- Каждому экземпляру сущности A может соответствовать несколько экземпляров сущности B
- Каждому экземпляру сущности B соответствует не более одного экземпляра сущности A
- **Пример:** Аэропорт → Рейсы

### 2.3 Связь "многие ко многим" (M:M)
- Каждому экземпляру сущности A может соответствовать несколько экземпляров сущности B
- Каждому экземпляру сущности B может соответствовать несколько экземпляров сущности A
- **Пример:** Студенты ↔ Курсы (через промежуточную таблицу)

## 3. Нормализация баз данных

### 3.1 Первая нормальная форма (1NF)
**Условия:**
- Все атрибуты атомарны (неделимы)
- Нет повторяющихся групп
- Каждая строка уникальна

**Пример нарушения:**
```
| ID | Name | Phones |
|----|------|--------|
| 1  | John | 123, 456 |
```

**Исправление:**
```
| ID | Name | Phone |
|----|------|-------|
| 1  | John | 123   |
| 1  | John | 456   |
```

### 3.2 Вторая нормальная форма (2NF)
**Условия:**
- Соответствует 1NF
- Все неключевые атрибуты полностью функционально зависят от первичного ключа

**Пример нарушения:**
```
| Student_ID | Course_ID | Course_Name | Grade |
|------------|-----------|-------------|-------|
| 1          | C1        | Math        | A     |
| 1          | C2        | Physics     | B     |
```

**Исправление:**
```
Students_Courses:          Courses:
| Student_ID | Course_ID | Grade |    | Course_ID | Course_Name |
|------------|-----------|-------|    |-----------|-------------|
| 1          | C1        | A     |    | C1        | Math        |
| 1          | C2        | B     |    | C2        | Physics     |
```

### 3.3 Третья нормальная форма (3NF)
**Условия:**
- Соответствует 2NF
- Нет транзитивных зависимостей (неключевые атрибуты не зависят от других неключевых атрибутов)

**Пример нарушения:**
```
| Student_ID | Student_Name | Department | Department_Head |
|------------|--------------|------------|-----------------|
| 1          | John         | CS         | Dr. Smith       |
| 2          | Jane         | CS         | Dr. Smith       |
```

**Исправление:**
```
Students:                  Departments:
| Student_ID | Name | Dept_ID |    | Dept_ID | Name | Head |
|------------|------|---------|    |---------|------|------|
| 1          | John | CS      |    | CS      | CS   | Dr. Smith |
| 2          | Jane | CS      |    |         |      |      |
```

## 4. Ограничения целостности

### 4.1 Ограничения домена
- Значения атрибутов должны принадлежать определенному домену
- **Пример:** Возраст должен быть положительным числом

### 4.2 Ограничения ключей
- Первичный ключ не может быть NULL
- Первичный ключ должен быть уникальным
- **Пример:** user_id в таблице Users

### 4.3 Ограничения ссылочной целостности
- Внешний ключ должен ссылаться на существующий первичный ключ
- **Пример:** flight_id в таблице Tickets должен существовать в таблице Flights

### 4.4 Ограничения сущности
- Каждая сущность должна иметь уникальный идентификатор
- **Пример:** Каждый пользователь должен иметь уникальный user_id

## 5. Индексы в базах данных

### 5.1 Типы индексов

**Кластеризованный индекс:**
- Определяет физический порядок хранения данных
- В таблице может быть только один кластеризованный индекс
- **Пример:** PRIMARY KEY

**Некластеризованный индекс:**
- Создает отдельную структуру для быстрого поиска
- В таблице может быть несколько некластеризованных индексов
- **Пример:** Индекс по email для быстрого поиска пользователей

### 5.2 Составные индексы
- Индекс по нескольким столбцам
- **Пример:** Индекс по (last_name, first_name) для поиска по ФИО

## 6. Транзакции и ACID

### 6.1 Свойства ACID

**Atomicity (Атомарность):**
- Транзакция выполняется полностью или не выполняется вообще
- Нет промежуточных состояний

**Consistency (Согласованность):**
- Транзакция переводит БД из одного согласованного состояния в другое
- Все ограничения целостности соблюдаются

**Isolation (Изолированность):**
- Транзакции выполняются изолированно друг от друга
- Результат выполнения транзакции не зависит от других параллельных транзакций

**Durability (Долговечность):**
- После успешного завершения транзакции изменения сохраняются навсегда
- Даже при сбое системы данные не теряются

### 6.2 Уровни изоляции

1. **Read Uncommitted** - чтение незафиксированных данных
2. **Read Committed** - чтение только зафиксированных данных
3. **Repeatable Read** - повторяемое чтение
4. **Serializable** - сериализуемость

## 7. Проектирование для аэропорта

### 7.1 Специфические требования

**Высокая доступность:**
- Система должна работать 24/7
- Минимальное время простоя

**Масштабируемость:**
- Поддержка большого количества одновременных пользователей
- Обработка пиковых нагрузок

**Безопасность:**
- Защита персональных данных пассажиров
- Аудит всех операций
- Контроль доступа

**Производительность:**
- Быстрый поиск рейсов
- Оптимизация запросов
- Кэширование часто используемых данных

### 7.2 Архитектурные решения

**Микросервисная архитектура:**
- Разделение на независимые сервисы
- Управление пользователями, рейсами, билетами

**Репликация данных:**
- Мастер-слейв конфигурация
- Чтение с реплик, запись в мастер

**Партиционирование:**
- Разделение больших таблиц по датам
- Улучшение производительности запросов

## 8. Инструменты проектирования

### 8.1 CASE-средства
- **MySQL Workbench** - для MySQL
- **pgAdmin** - для PostgreSQL
- **SQL Server Management Studio** - для SQL Server
- **Oracle SQL Developer** - для Oracle

### 8.2 Онлайн-инструменты
- **draw.io** - создание ER-диаграмм
- **Lucidchart** - профессиональное моделирование
- **dbdiagram.io** - специализированный инструмент для БД

### 8.3 Версионирование схемы
- **Flyway** - миграции для Java
- **Alembic** - миграции для Python
- **Liquibase** - кроссплатформенные миграции

## 9. Лучшие практики

### 9.1 Именование
- Использование понятных и описательных имен
- Соблюдение единого стиля именования
- Избегание зарезервированных слов

### 9.2 Проектирование
- Начинать с простой модели
- Итеративное улучшение
- Документирование решений

### 9.3 Производительность
- Создание индексов для часто используемых запросов
- Избегание SELECT *
- Использование подходящих типов данных

### 9.4 Безопасность
- Принцип минимальных привилегий
- Шифрование чувствительных данных
- Регулярное обновление системы

## 10. Заключение

Проектирование базы данных для системы управления аэропортом требует:

1. **Тщательного анализа требований** - понимание бизнес-процессов
2. **Правильного выбора типов связей** - обеспечение целостности данных
3. **Соблюдения принципов нормализации** - устранение избыточности
4. **Учета специфики предметной области** - высокая доступность и производительность
5. **Использования современных инструментов** - эффективное проектирование и разработка

Успешное проектирование БД является основой для создания надежной и масштабируемой информационной системы.
