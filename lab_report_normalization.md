# Отчет по лабораторной работе: Даталогическая модель и нормализация БД

## Цель работы
Разработать даталогическую модель утвержденной базы данных системы управления аэропортом и привести её к третьей нормальной форме с обоснованием необходимости денормализации.

## Выполненные задачи

### 1. Анализ текущей схемы на соответствие нормальным формам

#### Первая нормальная форма (1НФ)
✅ **СОБЛЮДЕНА** - Все атрибуты являются атомарными, отсутствуют повторяющиеся группы.

#### Вторая нормальная форма (2НФ)
❌ **НАРУШЕНИЯ ОБНАРУЖЕНЫ:**
- Таблица `Routes`: аэропорты отправления и прибытия функционально зависят друг от друга
- Таблица `Flights`: дублирование информации об аэропортах из таблицы Routes

#### Третья нормальная форма (3НФ)
❌ **НАРУШЕНИЯ ОБНАРУЖЕНЫ:**
- Таблица `Aircraft`: транзитивная зависимость `model` → `manufacturer`
- Таблица `Airports`: транзитивная зависимость `city` → `country`
- Таблица `Gates`: транзитивная зависимость через связь с Terminals

### 2. Нормализация к третьей нормальной форме

#### Созданные новые таблицы:
1. **Aircraft_Models** - справочник моделей самолетов
2. **Cities** - справочник городов и стран

#### Модифицированные таблицы:
1. **Aircraft** - добавлена связь с Aircraft_Models
2. **Airports** - добавлена связь с Cities  
3. **Routes** - добавлен уникальный ключ по паре аэропортов
4. **Gates** - добавлен уникальный ключ по терминалу и номеру гейта
5. **Flights** - оптимизирована структура связей

### 3. Обоснованная денормализация

#### Принятые решения о денормализации:

##### Aircraft - характеристики модели
**Решение:** Денормализовать `model_name`, `manufacturer`, `capacity`, `max_range`
**Обоснование:**
- Частые запросы на получение характеристик самолета при расчете загрузки рейсов
- Данные модели самолета стабильны и редко изменяются
- Значительное улучшение производительности запросов
- Уменьшение количества JOIN операций

##### Flights - аэропорты отправления и прибытия
**Решение:** Денормализовать `departure_airport_id`, `arrival_airport_id`
**Обоснование:**
- Критически важные запросы на получение информации о рейсах
- Частое использование в отчетах и аналитике
- Улучшение производительности при фильтрации по аэропортам
- Упрощение запросов для пользовательского интерфейса

### 4. Механизмы поддержания целостности

#### Триггеры для синхронизации денормализованных данных:
1. `sync_aircraft_model_data` - синхронизация при изменении Aircraft_Models
2. `sync_aircraft_on_insert` - синхронизация при вставке нового самолета
3. `sync_flight_route_data` - синхронизация при изменении Routes
4. `sync_flight_on_insert` - синхронизация при вставке нового рейса

#### Индексы для оптимизации:
- Индексы по внешним ключам
- Индексы по часто используемым полям для фильтрации
- Составные индексы для уникальных ограничений

### 5. Даталогическая модель

#### Структура нормализованной БД:
- **17 таблиц** (2 новые + 15 модифицированных)
- **Полная ссылочная целостность** через внешние ключи
- **Оптимизированные индексы** для производительности
- **Триггеры** для поддержания консистентности денормализованных данных

#### Ключевые улучшения:
1. Устранение транзитивных зависимостей
2. Создание справочных таблиц для часто используемых данных
3. Обоснованная денормализация для критически важных запросов
4. Сохранение ссылочной целостности
5. Оптимизация структуры для типичных операций системы

### 6. Результаты нормализации

#### Преимущества нормализации:
- ✅ Устранение избыточности данных
- ✅ Улучшение целостности данных
- ✅ Упрощение обновлений справочной информации
- ✅ Соответствие принципам проектирования БД

#### Преимущества денормализации:
- ✅ Повышение производительности запросов
- ✅ Уменьшение сложности запросов
- ✅ Оптимизация для типичных операций системы
- ✅ Улучшение пользовательского опыта

#### Контроль качества:
- ✅ Сохранение ссылочной целостности
- ✅ Автоматическая синхронизация через триггеры
- ✅ Регулярная проверка согласованности данных
- ✅ Логирование изменений для аудита

## Заключение

База данных успешно приведена к третьей нормальной форме с обоснованной денормализацией. Все изменения направлены на:

1. **Устранение нарушений нормальных форм** - созданы справочные таблицы для устранения транзитивных зависимостей
2. **Оптимизацию производительности** - денормализованы критически важные данные для частых запросов
3. **Поддержание целостности** - реализованы механизмы автоматической синхронизации
4. **Улучшение масштабируемости** - структура оптимизирована для роста данных и нагрузки

Нормализованная схема обеспечивает баланс между производительностью, целостностью данных и простотой сопровождения, что критически важно для системы управления аэропортом.

## Файлы проекта

1. `datalogical_model_and_normalization.md` - подробный анализ нормализации
2. `normalized_database_diagram.md` - ER-диаграмма нормализованной БД
3. `create_normalized_database.sql` - SQL-скрипт для создания БД
4. `lab_report_normalization.md` - данный отчет

## Готовность к защите

Все требования лабораторной работы выполнены:
- ✅ Даталогическая модель разработана
- ✅ БД приведена к третьей нормальной форме
- ✅ Денормализация обоснована и документирована
- ✅ Созданы SQL-скрипты для реализации
- ✅ Подготовлена документация и диаграммы



